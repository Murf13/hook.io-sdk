#!/usr/bin/env node

var config = require('../config');
var program = require('commander');
var fs = require('fs');

program
  .version('2.1.0')
  .command('key', 'get / set current API access key')
  .command('list', 'list existing config properties')
  .action(function (envSwitch) {
    // default action here is to switch config env based on file name and incoming argument name
    // for example: 'hook config dev` switch to dev env and 'hook config production` switches to production env
    config.base.configEnv = envSwitch;
    console.log('switching to env: %s', envSwitch);
    fs.writeFileSync(__dirname + '/../config/index.json', JSON.stringify(config.base, true, 2));
  });

program.on('--help', function(){
  console.log('  Notes:');
  console.log('');
  console.log('    Run `hook config key` to authorize with hook.io API');
  console.log('');
  console.log('    Using config env: ' + config.env);
  console.log('');
});

program.parse(process.argv);